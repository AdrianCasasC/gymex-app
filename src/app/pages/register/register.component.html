<form (ngSubmit)="handleSubmit()" method="get">
  <div class="fieldError flex-col">
    <ng-container *ngFor="let error of validationErrors">
      <span *ngIf="error.field === 'name'">{{
        error.message | capitalizefirst
      }}</span>
    </ng-container>
  </div>
  <div
    class="input-border"
    [style.margin-top]="hasFieldError('name') ? '0' : '40px'"
    [style.margin-bottom]="hasFieldError('name') ? '12px' : '0'"
  >
    <mat-icon>person</mat-icon>
    <input
      type="text"
      name="name"
      autocomplete="off"
      [placeholder]="'register.name' | transloco | titlecase"
      [(ngModel)]="newUser.name"
    />
  </div>

  <div class="fieldError flex-col">
    <ng-container *ngFor="let error of validationErrors">
      <span *ngIf="error.field === 'email'">{{
        error.message | capitalizefirst
      }}</span>
    </ng-container>
  </div>
  <div
    class="input-border"
    [style.margin-top]="hasFieldError('email') ? '0' : '40px'"
    [style.margin-bottom]="hasFieldError('name') ? '12px' : '0'"
  >
    <mat-icon>mail</mat-icon>
    <input
      type="email"
      name="email"
      autocomplete="off"
      [placeholder]="'register.email' | transloco | titlecase"
      [(ngModel)]="newUser.email"
    />
  </div>

  <div class="fieldError flex-col">
    <ng-container *ngFor="let error of validationErrors">
      <span *ngIf="error.field === 'password'">{{
        error.message | capitalizefirst
      }}</span>
    </ng-container>
  </div>
  <div
    class="input-border"
    [style.margin-top]="hasFieldError('password') ? '0' : '40px'"
    [style.margin-bottom]="hasFieldError('name') ? '12px' : '0'"
  >
    <mat-icon>lock</mat-icon>
    <input
      type="password"
      name="password"
      autocomplete="off"
      [placeholder]="'register.password' | transloco | capitalizefirst"
      [(ngModel)]="newUser.password"
    />
  </div>

  <div class="fieldError flex-col">
    <ng-container *ngFor="let error of validationErrors">
      <span *ngIf="error.field === 'confirmPassword'">{{
        error.message | capitalizefirst
      }}</span>
    </ng-container>
  </div>
  <div
    class="input-border"
    [style.margin-top]="hasFieldError('confirmPassword') ? '0' : '40px'"
    [style.margin-bottom]="hasFieldError('name') ? '12px' : '0'"
  >
    <mat-icon>lock</mat-icon>
    <input
      type="password"
      name="confirmPassword"
      autocomplete="off"
      [placeholder]="'register.confirmPassword' | transloco | titlecase"
      [(ngModel)]="newUser.confirmPassword"
    />
  </div>

  <div class="dropdownError">
    <ng-container *ngFor="let error of validationErrors">
      <span *ngIf="error.field === 'sex'">{{
        error.message | capitalizefirst
      }}</span>
    </ng-container>
  </div>

  <app-dropdown
    class="dropdown"
    [options]="dropdownOptions"
    [label]="'register.sex' | transloco | titlecase"
    [showOptions]="showDropdownOptions$"
    (selectedOption)="onSelectedOption($event)"
    (clickOutside)="onClickOutside()"
  ></app-dropdown>

  <button
    *ngIf="(showDropdownOptions$ | async) === false"
    class="login login__register"
    type="submit"
  >
    {{ "register.save" | transloco | titlecase }}
  </button>

  <span *ngIf="showConflictmessage" class="conflictMessage">{{
    "login.userExistsError" | transloco
  }}</span>
</form>

<app-save-modal
  *ngIf="successRegister"
  class="modal"
  [label]="'login.successRegister' | transloco"
  [errorLabel]="'modal.error' | transloco"
  [successfullSave]="successRegister"
></app-save-modal>
